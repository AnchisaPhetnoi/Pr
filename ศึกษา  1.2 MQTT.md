##   1.2 MQTT
###  MQTT คืออะไร

####  MQTT เป็นโปรโตคอลการส่งข้อความที่อิงตามมาตรฐาน หรือชุดของกฎที่ใช้สำหรับการสื่อสารระหว่างเครื่องต่อเครื่อง เซ็นเซอร์อัจฉริยะ อุปกรณ์สวมใส่ และอุปกรณ์ Internet of Things (IoT) อื่นๆ มักจะต้องส่งและรับข้อมูลผ่านเครือข่ายที่มีข้อจำกัดด้านทรัพยากร ซึ่งมีแบนด์วิดท์จำกัด อุปกรณ์ IoT เหล่านี้ใช้ MQTT ในการรับส่งข้อมูล เนื่องจากมันใช้งานง่ายและสามารถสื่อสารข้อมูล IoT ได้อย่างมีประสิทธิภาพ MQTT รองรับการส่งข้อความจากอุปกรณ์ไปยังคลาวด์และจากคลาวด์ไปยังอุปกรณ์
โปรโตคอล MQTT สำคัญอย่างไร

### โปรโตคอล MQTT กลายเป็นมาตรฐานสำหรับการรับส่งข้อมูล IoT เนื่องจากประโยชน์ดังต่อไปนี้:
สิ้นเปลืองทรัพยากรน้อยและประสิทธิภาพสูง

### การนำ MQTT ไปใช้งานบนอุปกรณ์ IoT นั้นต้องการทรัพยากรเพียงเล็กน้อย ดังนั้นมันจึงสามารถใช้ได้กับไมโครคอนโทรลเลอร์ขนาดเล็กได้ ตัวอย่างเช่น ข้อความควบคุม MQTT ที่สั้นที่สุดสามารถมีขนาดข้อมูลเพียงสองไบต์เท่านั้น ส่วนหัวของข้อความ MQTT ก็มีขนาดเล็กเช่นกัน มันจึงให้ประสิทธิภาพแบนด์วิดท์เครือข่ายที่ดีที่สุด
ปรับขนาดได้

### การนำ MQTT ไปใช้นั้นต้องการโค้ดเพียงน้อย ซึ่งจะใช้พลังงานในการทำงานเพียงเล็กน้อย โปรโตคอลนี้ยังมีคุณสมบัติในตัวเพื่อรองรับการสื่อสารกับอุปกรณ์ IoT จำนวนมาก ดังนั้นคุณจึงสามารถใช้โปรโตคอล MQTT เพื่อเชื่อมต่อกับอุปกรณ์เหล่านี้ได้นับล้านเครื่อง
น่าเชื่อถือ

### อุปกรณ์ IoT จำนวนมากเชื่อมต่อผ่านเครือข่ายเซลลูลาร์ที่ไม่มีความน่าเชื่อถือ มีแบนด์วิดท์ต่ำและเวลาแฝงสูง MQTT มีคุณสมบัติในตัวที่ช่วยลดเวลาที่อุปกรณ์ IoT จะใช้ในการกลับมาเชื่อมต่อกับคลาวด์อีกครั้ง นอกจากนี้ยังกำหนดระดับคุณภาพการบริการที่แตกต่างกันสามระดับ เพื่อรับประกันความน่าเชื่อถือสำหรับกรณีการใช้งาน IoT ต่างๆ — ไม่เกินหนึ่งครั้ง (0) อย่างน้อยหนึ่งครั้ง (1) ครั้งเดียวเท่านั้น (2)
ปลอดภัย

### MQTT ช่วยให้นักพัฒนาสามารถเข้ารหัสลับข้อความและรับรองความถูกต้องของอุปกรณ์และผู้ใช้ได้ง่าย โดยใช้โปรโตคอลการรับรองความถูกต้องสมัยใหม่ เช่น OAuth, TLS1.3, Customer Managed Certificates ฯลฯ
มีการสนับสนุนที่ดี

### ภาษาโปรแกรมหลายภาษา เช่น Python รองรับการใช้งานโปรโตคอล MQTT อย่างกว้างขวาง ดังนั้นนักพัฒนาจึงสามารถนำไปใช้งานได้อย่างรวดเร็ว โดยมีการเขียนโค้ดน้อยที่สุดในแอปพลิเคชันประเภทใดๆ
ประวัติเบื้องหลังโปรโตคอล MQTT เป็นอย่างไร

### โปรโตคอล MQTT ถูกคิดค้นขึ้นในปี 1999 เพื่อใช้ในอุตสาหกรรมน้ำมันและก๊าซ วิศวกรต้องการโปรโตคอลที่ใช้แบนด์วิธน้อยที่สุด และสิ้นเปลืองแบตเตอรี่น้อยที่สุด เพื่อการติดตามตรวจสอบท่อส่งน้ำมันผ่านดาวเทียม ในตอนเริ่มแรก โปรโตคอลนี้ถูกเรียกว่า Message Queuing Telemetry Transport เนื่องจากผลิตภัณฑ์ IBM MQ Series เป็นผู้สนับสนุนระยะเริ่มแรก ในปี 2010 IBM ได้เผยแพร่โปรโตคอล MQTT 3.1 ซึ่งเป็นโปรโตคอลแบบเปิด ที่ทุกคนสามารถนำไปใช้ได้ฟรี ซึ่งในปี 2013 ได้มีการส่งโปรโตคอลนี้ไปยังหน่วยงานดูแลข้อกำหนดเฉพาะของ Organization for the Advancement of Structured Information Standards (OASIS) เพื่อให้เป็นผู้ดูแลรักษา ในปี 2019 OASIS ได้เผยแพร่ MQTT เวอร์ชัน 5 ที่เป็นเวอร์ชันอัปเกรด ในตอนนี้ MQTT ไม่ใช่ตัวย่ออีกต่อไป แต่ถือเป็นชื่อทางการของโปรโตคอล 
หลักการเบื้องหลัง MQTT คืออะไร

### โปรโตคอล MQTT ทำงานบนหลักการแบบ เผยแพร่/สมัครรับ ในการสื่อสารผ่านเครือข่ายแบบดั้งเดิม ไคลเอนต์และเซิร์ฟเวอร์จะสื่อสารกันโดยตรง ไคลเอนต์จะร้องขอทรัพยากรหรือข้อมูลจากเซิร์ฟเวอร์ จากนั้นเซิร์ฟเวอร์จะประมวลผลและส่งข้อความตอบกลับมา อย่างไรก็ตาม MQTT ใช้รูปแบบ เผยแพร่/สมัครรับ เพื่อจะได้แยกผู้ส่งข้อความ (ผู้เผยแพร่) ออกจากผู้รับข้อความ (ผู้สมัครรับ) องค์ประกอบที่สามที่เรียกว่าโบรกเกอร์ข้อความจะเป็นตัวจัดการการสื่อสารระหว่างผู้เผยแพร่และผู้สมัครรับข้อมูลแทน งานของโบรกเกอร์คือการกรองข้อความขาเข้าทั้งหมดจากผู้เผยแพร่ และกระจายไปยังผู้สมัครรับข้อความอย่างถูกต้อง โบรกเกอร์จะแยกผู้เผยแพร่กับผู้สมัครรับข้อความออกจากกันดังนี้:
การแยกเชิงพื้นที่

### ผู้เผยแพร่และผู้สมัครรับจะไม่ทราบตำแหน่งเครือข่ายของกันและกัน และไม่แลกเปลี่ยนข้อมูล เช่น ที่อยู่ IP หรือหมายเลขพอร์ต ซึ่งกันและกัน
การแยกเชิงเวลา

### ผู้เผยแพร่และผู้สมัครรับจะไม่ต้องทำงานหรือมีการเชื่อมต่อเครือข่ายในเวลาเดียวกัน การแยกการซิงโครไนซ์

### ทั้งผู้เผยแพร่และผู้สมัครรับสามารถส่งหรือรับข้อความได้โดยไม่รบกวนการทำงานกัน เช่น ผู้สมัครรับจะไม่ต้องรอให้ผู้เผยแพร่ส่งข้อความส่วนประกอบของ MQTT คืออะไรบ้าง

###  MQTT ใช้รูปแบบการเผยแพร่/สมัครรับข้อความ โดยกำหนดนิยามไคลเอนต์และโบรกเกอร์ดังต่อไปนี้
ไคลเอนต์ MQTT

ไคลเอ็นต์ MQTT คืออุปกรณ์ใดๆ ตั้งแต่เซิร์ฟเวอร์ไปจนถึงไมโครคอนโทรลเลอร์ที่เรียกใช้ไลบรารี MQTT หากไคลเอ็นต์ส่งข้อความ มันทำหน้าที่เป็นผู้เผยแพร่ และหากไคลเอ็นต์รับข้อความ มันทำหน้าที่เป็นผู้รับ โดยทั่วไปแล้ว อุปกรณ์ใดๆ ที่สื่อสารโดยใช้ MQTT ผ่านเครือข่าย ก็สามารถเรียกว่าเป็นอุปกรณ์ไคลเอ็นต์ MQTT

###  โบรกเกอร์ MQTT

โบรกเกอร์ MQTT เป็นระบบแบ็กเอนด์ที่ประสานงานการรับส่งข้อความระหว่างไคลเอนต์ต่างๆ หน้าที่ของโบรกเกอร์นั้นรวมถึงการรับและการกรองข้อความ การระบุไคลเอนต์ที่สมัครรับข้อความแต่ละข้อความ และการส่งข้อความไปให้ไคลเอนต์เหล่านั้น นอกจากนี้ยังมีหน้าที่งานอื่น ๆ ด้วย เช่น:

    การอนุญาตและการรับรองความถูกต้องให้ไคลเอ็นต์ MQTT
    การส่งต่อข้อความไปยังระบบอื่นเพื่อการวิเคราะห์เพิ่มเติม
    การจัดการข้อความที่พลาดไป และเซสชันของไคลเอ็นต์

### การเชื่อมต่อ MQTT

ไคลเอนต์และโบรกเกอร์เริ่มต้นการสื่อสารโดยใช้การเชื่อมต่อ MQTT ไคลเอนต์เริ่มต้นการเชื่อมต่อโดยส่งข้อความ CONNTECT ถึงโบรกเกอร์ MQTT โบรกเกอร์ยืนยันว่าสร้างการเชื่อมต่อแล้ว โดยการตอบกลับด้วยข้อความ CONNACK ทั้งไคลเอนต์ MQTT และโบรกเกอร์จำเป็นต้องใช้สแต็ก TCP/IP ในการสื่อสาร ไคลเอนต์จะไม่เชื่อมต่อกันเอง แต่จะเชื่อมต่อเฉพาะกับโบรกเกอร์เท่านั้น
MQTT ทำงานอย่างไร

#### ภาพรวมวิธีการทำงานของ MQTT แสดงไว้ต่อไปนี้ 

    ไคลเอนต์ MQTT จะสร้างการเชื่อมต่อกับโบรกเกอร์ MQTT
    เมื่อเชื่อมต่อแล้ว ลูกค้าสามารถเผยแพร่ข้อความ สมัครรับข้อความที่เฉพาะเจาะจง หรือทำทั้งสองอย่างได้
    เมื่อโบรกเกอร์ MQTT ได้รับข้อความแล้ว ก็ส่งต่อไปยังผู้สมัครรับข้อความที่ให้ความสนใจ


#### หัวข้อ MQTT

คำว่า "หัวข้อ" หมายถึงคำหลักที่โบรกเกอร์ MQTT ใช้ในการกรองข้อความสำหรับไคลเอ็นต์ MQTT หัวข้อจะได้รับการจัดระเบียบตามลำดับชั้น ที่คล้ายกับไฟล์หรือไดเร็กทอรีหรือโฟลเดอร์ ตัวอย่างเช่น ลองพิจารณาระบบบ้านอัจฉริยะในบ้านหลายชั้นซึ่งมีอุปกรณ์อัจฉริยะต่างๆ ในแต่ละชั้น ในกรณีเช่นนั้น โบรกเกอร์ MQTT อาจจัดหัวข้อเป็น:

บ้านของเรา/ชั้นล่าง/ห้องนั่งเล่น/แสงสว่าง

บ้านของเรา/ชั้นหนึ่ง/ห้องครัว/อุณหภูมิ
MQTT เผยแพร่

#### ไคลเอ็นต์ MQTT เผยแพร่ข้อความที่มีหัวข้อและข้อมูลในรูปแบบไบต์ ไคลเอ็นต์จะกำหนดรูปแบบข้อมูล เช่น ข้อความ, ข้อมูลไบนารี, ไฟล์ XML, หรือ JSON ตัวอย่างเช่น หลอดไฟในระบบสมาร์ทโฮมอาจเผยแพร่ข้อความ เปิด สำหรับหัวข้อ ห้องนั่งเล่น/แสงสว่าง
MQTT สมัครรับข้อความ 

#### ไคลเอนต์ MQTT ส่งข้อความ SUBSCRIBE ไปให้โบรกเกอร์ MQTT เพื่อจะรับข้อความในหัวข้อที่สนใจ ข้อความนี้ประกอบด้วยตัวระบุที่ไม่ซ้ำกันและรายการการสมัครรับข้อมูล ตัวอย่างเช่น แอปบ้านอัจฉริยะในโทรศัพท์ของคุณต้องการแสดงจำนวนไฟที่เปิดอยู่ในบ้านของคุณ แอปจะสมัครรับหัวข้อ แสงสว่าง และเพิ่มตัวนับสำหรับข้อความ เปิด ทุกข้อความ 
MQTT over WSS คืออะไร

#### MQTT over WebSockets (WSS) เป็นการปรับใช้ MQTT เพื่อการรับข้อมูลไปยังเว็บเบราว์เซอร์โดยตรง โปรโตคอล MQTT จะกำหนดไคลเอนต์ JavaScript เพื่อให้การสนับสนุน WSS สำหรับเบราว์เซอร์ ในกรณีนี้ โปรโตคอลจะทำงานตามปกติ แต่จะเพิ่มส่วนหัวเพิ่มเติมไปยังข้อความ MQTT เพื่อให้สามารถรองรับโปรโตคอล WSS ได้ด้วย คุณอาจมองได้ว่าเป็นเพย์โหลดของข้อความ MQTT ที่รวมอยู่ในซองจดหมายของ WSS
MQTT ปลอดภัยหรือไม่?

#### การสื่อสาร MQTT ใช้โปรโตคอล SSL เพื่อคุ้มครองข้อมูลที่ละเอียดอ่อนที่ส่งโดยอุปกรณ์ IoT คุณสามารถใช้ข้อมูลประจำตัว การรับรองความถูกต้อง และการอนุญาตระหว่างไคลเอ็นต์และโบรกเกอร์ได้ โดยใช้ใบรับรอง SSL และ/หรือรหัสผ่าน โดยปกติแล้ว โบรกเกอร์ MQTT จะรับรองความถูกต้องของไคลเอ็นต์โดยใช้รหัสผ่านของตัวเอง และตัวระบุไคลเอ็นต์ที่ไม่ซ้ำกันซึ่งจัดสรรให้กับไคลเอ็นต์แต่ละรายการ ในการนำมาใช้งานส่วนใหญ่ ไคลเอ็นต์จะตรวจสอบความถูกต้องของเซิร์ฟเวอร์ด้วยใบรับรองหรือการค้นหา DNS และคุณยังสามารถใช้โปรโตคอลการเข้ารหัสลับได้ ด้วย MQTT 
MQTT เป็นการดำเนินการแบบ RESTful หรือไม่

#### MQTT ไม่ใช่ RESTful Representational state transfer (REST) เป็นแนวทางเชิงสถาปัตยกรรมของการสื่อสารในเครือข่ายที่ใช้รูปแบบร้องขอ-ตอบกลับ ในการสื่อสารระหว่างผู้ส่งข้อความและผู้รับข้อความ เมื่อเทียบกันแล้ว MQTT ใช้รูปแบบการสื่อสารแบบเผยแพร่/สมัครรับ ในชั้นแอปพลิเคชัน และต้องการการเชื่อมต่อ TCP แบบต่อเนื่องเพื่อการส่งข้อความแบบพุช อย่างไรก็ตาม MQTT เวอร์ชัน 5 ได้เพิ่มวิธีการแบบร้องขอ/ตอบกลับ เข้ามาใหม่ เพื่อดำเนินการในลักษณะที่คล้ายกับวิธี REST ซึ่งผู้เผยแพร่ข้อมูลสามารถแนบหัวข้อการตอบกลับพิเศษซึ่งผู้รับจะประมวลผลและสร้างการตอบกลับที่เหมาะสม
AWS สนับสนุนการใช้งาน MQTT ของคุณได้อย่างไร

#### AWS IoT Core เป็นบริการที่มีการจัดการอย่างสมบูรณ์ที่ช่วยให้คุณเชื่อมต่ออุปกรณ์ IoT หลายพันล้านเครื่อง ทั้งยังกำหนดเส้นทางข้อความหลายล้านล้านรายการไปยังบริการของ AWS คุณสามารถ:

    เชื่อมต่อ จัดการ และปรับขนาดให้กับฟลีตอุปกรณ์ของคุณได้อย่างง่ายดายและเชื่อถือได้โดยไม่จำเป็นต้องจัดเตรียมหรือจัดการกับเซิร์ฟเวอร์
    เลือกโปรโตคอลการสื่อสารที่คุณต้องการ เช่น MQTT, HTTPS, MQTT บน WSS และ LoRaWAN
    ปกป้องการเชื่อมต่ออุปกรณ์และข้อมูลด้วยการตรวจสอบร่วมกันและการเข้ารหัสแบบครบวงจร
    กลั่นกรอง เปลี่ยนแปลง และดำเนินการตามข้อมูลของอุปกรณ์ได้ทันที โดยขึ้นอยู่กับกฎธุรกิจที่คุณกำหนด

####  สรุป MQTT คืออะไร

MQTT (Message Queuing Telemetry Transport) เป็นโปรโตคอลที่ออกแบบมาเพื่อการสื่อสารแบบเบาบาง (lightweight) เหมาะสำหรับอุปกรณ์ IoT (Internet of Things) ที่มีทรัพยากรจำกัด เช่น เซ็นเซอร์, อุปกรณ์สวมใส่ หรืออุปกรณ์ควบคุมต่างๆ


#### MQTT ทำงานอย่างไร?

    Broker: เป็นตัวกลางในการรับส่งข้อมูล คล้ายกับเซิร์ฟเวอร์ที่ทำหน้าที่กระจายข้อมูลไปยังผู้สมัครรับข้อมูล (subscriber) ทั้งหมดที่สนใจหัวข้อนั้นๆ
    Topic: เป็นหัวข้อหรือช่องทางในการส่งข้อมูล เช่น "temperature", "door_status"
    Publisher: ผู้ส่งข้อมูลไปยัง topic ที่กำหนด
    Subscriber: ผู้รับข้อมูลจาก topic ที่สนใจ

#### ขั้นตอนการทำงาน:

    Publisher ส่งข้อความไปยัง topic ที่กำหนด
    Broker จะรับข้อความนั้นและส่งต่อให้ subscriber ทั้งหมดที่สมัครรับข้อมูลจาก topic นั้น

#### เหตุผลที่ MQTT ได้รับความนิยม

    เบาบางและมีประสิทธิภาพ: เหมาะสำหรับอุปกรณ์ IoT ที่มีทรัพยากรจำกัด
    แบบ Publish/Subscribe: ทำให้การสื่อสารเป็นแบบหลายต่อหลาย (many-to-many)
    Real-time: ข้อมูลสามารถส่งและรับได้แบบเรียลไทม์
    เชื่อถือได้: มีกลไกในการรับประกันว่าข้อมูลจะถูกส่งถึงปลายทาง

#### การใช้งาน MQTT ในชีวิตจริง

    บ้านอัจฉริยะ: ควบคุมอุปกรณ์ไฟฟ้าในบ้าน เช่น ไฟ, แอร์ ผ่านแอปพลิเคชัน
    อุตสาหกรรม: เก็บรวบรวมข้อมูลจากเซ็นเซอร์ในโรงงานเพื่อวิเคราะห์และปรับปรุงกระบวนการผลิต
    การเกษตร: ตรวจสอบสภาพอากาศ, ความชื้นในดิน เพื่อปรับปรุงการปลูกพืช
    Healthcare: ตรวจสอบสัญญาณชีพของผู้ป่วยจากระยะไกล

#### เรียนรู้เพิ่มเติมเกี่ยวกับ MQTT

    เอกสารทางเทคนิค: MQTT v5.0 Specification: https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html
    ไลบรารี: มีไลบรารีสำหรับภาษาโปรแกรมต่างๆ เช่น Python, C++, Java ให้เลือกใช้
    บริการ Cloud MQTT: หลายบริษัทมีบริการ Cloud MQTT เช่น AWS IoT Core, Azure IoT Hub, Google Cloud IoT Core


## MQTT กับเครื่องวัดอุณหภูมิตามภูมิภาค: เหมาะสมอย่างยิ่ง! ที่เราต้องทำกันกับโปรเจกย์ 

#### คำตอบคือ MQTT สามารถนำมาใช้กับเครื่องวัดอุณหภูมิตามภูมิภาคได้อย่างมีประสิทธิภาพสูง และนี่คือเหตุผลที่ทำให้ MQTT เป็นตัวเลือกที่ยอดเยี่ยมสำหรับการใช้งานประเภทนี้:

    ข้อมูลเรียลไทม์: MQTT สามารถส่งข้อมูลอุณหภูมิจากเครื่องวัดไปยังระบบกลางได้แบบเรียลไทม์ ทำให้เราสามารถติดตามและวิเคราะห์การเปลี่ยนแปลงของอุณหภูมิได้ทันที
    เบาบางและมีประสิทธิภาพ: โปรโตคอล MQTT ออกแบบมาเพื่อการสื่อสารที่เบาบาง เหมาะสำหรับอุปกรณ์ IoT เช่น เครื่องวัดอุณหภูมิที่มีทรัพยากรจำกัด
    ปรับขนาดได้: MQTT สามารถรองรับการเชื่อมต่อของอุปกรณ์จำนวนมากได้ ทำให้สามารถสร้างเครือข่ายการวัดอุณหภูมิที่ครอบคลุมพื้นที่กว้างได้
    ยืดหยุ่น: MQTT สามารถกำหนดหัวข้อ (topic) ได้หลากหลาย ทำให้เราสามารถแยกแยะข้อมูลจากเครื่องวัดแต่ละเครื่องได้อย่างชัดเจน
    หลายแพลตฟอร์ม: มีไลบรารี MQTT สำหรับภาษาโปรแกรมต่างๆ ทำให้สามารถนำไปใช้งานกับอุปกรณ์และระบบปฏิบัติการที่หลากหลาย

#### วิธีการใช้งาน MQTT กับเครื่องวัดอุณหภูมิ

    เลือก Broker: เลือกบริการ MQTT Broker ที่เหมาะสม เช่น AWS IoT Core, Azure IoT Hub หรือ MQTT Broker ที่ติดตั้งเอง
    เตรียมเครื่องวัด: ติดตั้งซอฟต์แวร์หรือไลบรารี MQTT บนเครื่องวัดอุณหภูมิ เพื่อให้สามารถส่งข้อมูลไปยัง Broker ได้
    กำหนด Topic: กำหนดหัวข้อสำหรับข้อมูลอุณหภูมิ เช่น "temperature/region1", "temperature/region2"
    พัฒนาแอปพลิเคชัน: พัฒนาแอปพลิเคชันเพื่อรับข้อมูลจาก Broker และนำเสนอในรูปแบบที่ต้องการ เช่น แผนภูมิ, ตาราง หรือแผนที่

#### ตัวอย่างการใช้งานจริง

    เกษตรกรรม: ตรวจสอบอุณหภูมิในโรงเรือนเพื่อควบคุมสภาพแวดล้อมให้เหมาะสมต่อการเจริญเติบโตของพืช
    อุตสาหกรรม: ตรวจสอบอุณหภูมิของเครื่องจักรเพื่อป้องกันความเสียหาย
    สภาพอากาศ: สร้างเครือข่ายเครื่องวัดอุณหภูมิเพื่อเก็บรวบรวมข้อมูลอุณหภูมิตามภูมิภาคต่างๆ

#### ข้อควรพิจารณาเพิ่มเติม

    ความปลอดภัย: ควรใช้กลไกการรักษาความปลอดภัย เช่น การเข้ารหัสข้อมูล เพื่อป้องกันการเข้าถึงข้อมูลที่ไม่ได้รับอนุญาต
    คุณภาพของบริการ: เลือกบริการ MQTT Broker ที่มีคุณภาพและมีความเสถียรสูง
    ค่าใช้จ่าย: พิจารณาค่าใช้จ่ายในการใช้งานบริการ MQTT Broker และอุปกรณ์ที่เกี่ยวข้อง

#### สรุปแล้ว MQTT เป็นตัวเลือกที่ยอดเยี่ยมสำหรับการสร้างระบบการวัดอุณหภูมิตามภูมิภาค ด้วยความสามารถในการส่งข้อมูลแบบเรียลไทม์, ความยืดหยุ่น และความสามารถในการปรับขนาด ทำให้ MQTT สามารถตอบสนองความต้องการในการใช้งานที่หลากหลายได้


## MQTT เหมาะสำหรับโครงการวัดอุณหภูมิผ่านเครือข่ายอย่างยิ่ง!

คำตอบคือ ใช่ค่ะ MQTT นั้นเป็นโปรโตคอลที่ออกแบบมาเพื่อการสื่อสารแบบเบาบาง เหมาะสำหรับอุปกรณ์ IoT อย่างมาก โดยเฉพาะโครงการวัดอุณหภูมิผ่านเครือข่ายนั้น MQTT เข้ามาตอบโจทย์ได้เป็นอย่างดี

#### เหตุผลที่ MQTT เหมาะสม:

    ข้อมูลเรียลไทม์: MQTT สามารถส่งข้อมูลอุณหภูมิจากเซ็นเซอร์ไปยังระบบกลางได้อย่างรวดเร็ว ทำให้เราสามารถติดตามการเปลี่ยนแปลงของอุณหภูมิได้ทันที
    เบาบางและมีประสิทธิภาพ: MQTT ออกแบบมาเพื่อใช้ทรัพยากรน้อย เหมาะกับอุปกรณ์ IoT ที่มีกำลังการประมวลผลจำกัด เช่น เซ็นเซอร์วัดอุณหภูมิ
    ปรับขนาดได้: สามารถรองรับการเชื่อมต่อของอุปกรณ์จำนวนมากได้ ทำให้สามารถสร้างเครือข่ายการวัดอุณหภูมิที่ครอบคลุมพื้นที่กว้าง
    ยืดหยุ่น: สามารถกำหนดหัวข้อ (topic) ได้หลากหลาย ทำให้เราสามารถแยกแยะข้อมูลจากเซ็นเซอร์แต่ละตัวได้อย่างชัดเจน
    หลายแพลตฟอร์ม: มีไลบรารี MQTT สำหรับภาษาโปรแกรมต่างๆ ทำให้สามารถนำไปใช้งานกับอุปกรณ์และระบบปฏิบัติการที่หลากหลาย

#### ตัวอย่างการใช้งาน:

    เกษตรกรรม: ตรวจสอบอุณหภูมิในโรงเรือน เพื่อควบคุมสภาพแวดล้อมให้เหมาะสมต่อการเจริญเติบโตของพืช
    อุตสาหกรรม: ตรวจสอบอุณหภูมิของเครื่องจักร เพื่อป้องกันความเสียหาย
    สภาพอากาศ: สร้างเครือข่ายเซ็นเซอร์วัดอุณหภูมิเพื่อเก็บรวบรวมข้อมูลอุณหภูมิตามภูมิภาคต่างๆ

#### โครงสร้างพื้นฐานของระบบ:

    เซ็นเซอร์วัดอุณหภูมิ: เก็บข้อมูลอุณหภูมิ
    ไมโครคอนโทรลเลอร์: ประมวลผลข้อมูลจากเซ็นเซอร์และส่งข้อมูลผ่าน MQTT
    MQTT Broker: ทำหน้าที่เป็นตัวกลางในการรับส่งข้อมูล
    แอปพลิเคชัน: รับข้อมูลจาก MQTT Broker และนำเสนอในรูปแบบที่ต้องการ เช่น แผนภูมิ, ตาราง


![The-design-of-a-basic-IoT-system-for-temperature-monitoring](https://github.com/user-attachments/assets/29c22942-4249-4fe4-abc3-585a3398318e)


#### ข้อดีเพิ่มเติม:

    ค่าใช้จ่ายต่ำ: MQTT เป็นโปรโตคอลที่เปิดใช้งาน สามารถใช้งานได้ฟรี
    ความปลอดภัย: สามารถใช้กลไกการรักษาความปลอดภัย เช่น การเข้ารหัสข้อมูล เพื่อป้องกันการเข้าถึงข้อมูลที่ไม่ได้รับอนุญาต

#### สรุป:

MQTT เป็นตัวเลือกที่ยอดเยี่ยมสำหรับโครงการวัดอุณหภูมิผ่านเครือข่าย ด้วยความสามารถในการส่งข้อมูลแบบเรียลไทม์, ความยืดหยุ่น และความสามารถในการปรับขนาด ทำให้ MQTT สามารถตอบสนองความต้องการในการใช้งานที่หลากหลายได้


#### ข้อเสียของ MQTT: สิ่งที่ควรรู้ก่อนนำไปใช้งาน

ถึงแม้ว่า MQTT จะเป็นโปรโตคอลที่ได้รับความนิยมและเหมาะสมกับการใช้งาน IoT อย่างมาก แต่ก็มีข้อจำกัดและข้อควรพิจารณาบางประการ ดังนี้
##### 1. ความล่าช้า (Latency):

    ขึ้นอยู่กับเครือข่าย: ความเร็วในการส่งข้อมูลขึ้นอยู่กับคุณภาพของเครือข่ายเป็นหลัก หากเครือข่ายมีความหน่วงสูง ข้อมูลอาจล่าช้าได้
    จำนวน Subscriber: ยิ่งมี Subscriber มากเท่าไหร่ Broker ก็จะต้องประมวลผลข้อมูลมากขึ้น ทำให้เกิดความล่าช้าได้

##### 2. การรับประกันการส่งมอบ (QoS):

    QoS Level 0: ไม่รับประกันการส่งมอบข้อมูล หากแพ็กเก็ตข้อมูลหายไปจะไม่มีการส่งซ้ำ
    QoS Level 1: รับประกันการส่งมอบอย่างน้อย 1 ครั้ง แต่ไม่รับประกันว่าจะไม่ซ้ำ
    QoS Level 2: รับประกันการส่งมอบ 1 ครั้ง และไม่มีการส่งซ้ำ แต่ใช้ทรัพยากรมากขึ้น
    การเลือก QoS: การเลือก QoS Level ที่เหมาะสมนั้นขึ้นอยู่กับความสำคัญของข้อมูล หากข้อมูลมีความสำคัญสูง ควรเลือก QoS Level ที่สูงขึ้น แต่จะแลกมาด้วยการใช้ทรัพยากรมากขึ้น

##### 3. การจัดการ Broker:

    ความซับซ้อน: การตั้งค่าและดูแล Broker นั้นอาจมีความซับซ้อน โดยเฉพาะอย่างยิ่งหากมีการใช้งานในระบบขนาดใหญ่
    ทรัพยากร: Broker ต้องใช้ทรัพยากรในการประมวลผลข้อมูล จำนวนของ Broker ที่ต้องใช้จะขึ้นอยู่กับปริมาณข้อมูลและจำนวน Subscriber

##### 4. ความปลอดภัย:

    Authentication: แม้ว่า MQTT จะมีกลไกสำหรับการ Authentication แต่ก็ยังมีความเสี่ยงที่จะถูกโจมตีได้ หากไม่ได้ตั้งค่าความปลอดภัยอย่างเหมาะสม
    Authorization: การควบคุมสิทธิ์ในการเข้าถึง Topic นั้นมีความสำคัญ เพื่อป้องกันการเข้าถึงข้อมูลที่ไม่ได้รับอนุญาต

##### 5. ข้อจำกัดของ Topic:

    โครงสร้าง: โครงสร้างของ Topic อาจมีความซับซ้อนในการออกแบบ และอาจทำให้เกิดความสับสนในการจัดการ
    จำนวน Topic: การสร้าง Topic จำนวนมากเกินไปอาจทำให้การจัดการเป็นไปได้ยาก

##### เมื่อไรไม่ควรใช้ MQTT?

    ข้อมูลขนาดใหญ่: หากต้องส่งข้อมูลขนาดใหญ่บ่อยครั้ง MQTT อาจไม่เหมาะสม เนื่องจากอาจทำให้เกิดความล่าช้าและการใช้ทรัพยากรที่มากขึ้น
    ความต้องการความแม่นยำสูง: หากต้องการความแม่นยำในการส่งมอบข้อมูลสูงมาก และต้องรับประกันว่าข้อมูลจะไม่สูญหาย MQTT อาจไม่ใช่ตัวเลือกที่ดีที่สุด
    ระบบที่ต้องการการควบคุมการไหลของข้อมูลอย่างละเอียด: MQTT อาจไม่เหมาะสมสำหรับระบบที่ต้องการควบคุมการไหลของข้อมูลอย่างละเอียด เช่น ระบบที่ต้องการการรับประกันว่าข้อมูลจะถูกประมวลผลตามลำดับ



## MQTT ข้อเสีย ในการใช้งานกับ โครงการวัดอุณหภูมิผ่านเครือข่าย
ข้อเสียของ MQTT เมื่อนำไปใช้กับโครงการวัดอุณหภูมิผ่านเครือข่าย

ถึงแม้ว่า MQTT จะเป็นโปรโตคอลที่ได้รับความนิยมและเหมาะสมกับการใช้งาน IoT อย่างมาก แต่เมื่อนำไปใช้กับโครงการวัดอุณหภูมิผ่านเครือข่ายก็ยังมีข้อจำกัดและข้อควรพิจารณาบางประการที่คุณควรรู้ ดังนี้
##### 1. ความล่าช้า (Latency):

    ขึ้นอยู่กับเครือข่าย: ความเร็วในการส่งข้อมูลขึ้นอยู่กับคุณภาพของเครือข่ายเป็นหลัก หากเครือข่ายมีความหน่วงสูง ข้อมูลอุณหภูมิอาจล่าช้า ส่งผลต่อการตัดสินใจที่ต้องอาศัยข้อมูลเรียลไทม์
    จำนวนอุปกรณ์: ยิ่งมีอุปกรณ์เซ็นเซอร์วัดอุณหภูมิมากเท่าไหร่ Broker ก็จะต้องประมวลผลข้อมูลมากขึ้น ทำให้เกิดความล่าช้าได้

##### 2. การรับประกันการส่งมอบ (QoS):

    QoS Level 0: ไม่รับประกันการส่งมอบข้อมูล หากแพ็กเก็ตข้อมูลหายไป ข้อมูลอุณหภูมิอาจสูญหายไป
    การเลือก QoS: การเลือก QoS Level ที่เหมาะสมนั้นขึ้นอยู่กับความสำคัญของข้อมูล หากข้อมูลอุณหภูมิมีความสำคัญสูง เช่น ในกระบวนการผลิต ควรเลือก QoS Level ที่สูงขึ้น แต่จะแลกมาด้วยการใช้ทรัพยากรมากขึ้น

##### 3. การจัดการ Broker:

    ความซับซ้อน: การตั้งค่าและดูแล Broker นั้นอาจมีความซับซ้อน โดยเฉพาะอย่างยิ่งหากมีการใช้งานในระบบขนาดใหญ่ที่ต้องรองรับเซ็นเซอร์จำนวนมาก
    ทรัพยากร: Broker ต้องใช้ทรัพยากรในการประมวลผลข้อมูล จำนวนของ Broker ที่ต้องใช้จะขึ้นอยู่กับปริมาณข้อมูลและจำนวนเซ็นเซอร์

##### 4. ความปลอดภัย:

    การเข้าถึงที่ไม่ได้รับอนุญาต: หากไม่มีการจัดการความปลอดภัยที่ดี อาจมีผู้บุกรุกเข้ามาแทรกแซงข้อมูลอุณหภูมิได้
    การโจมตี: ระบบอาจถูกโจมตีด้วยวิธีต่างๆ เช่น DDoS Attack ทำให้ระบบไม่สามารถทำงานได้ตามปกติ

##### 5. การออกแบบ Topic:

    โครงสร้าง Topic: การออกแบบโครงสร้าง Topic ที่ซับซ้อนเกินไป อาจทำให้การจัดการและค้นหาข้อมูลเป็นเรื่องยาก
    จำนวน Topic: การสร้าง Topic จำนวนมากเกินไป อาจทำให้ระบบทำงานช้าลง

##### 6. ข้อจำกัดของ Payload:

    ขนาดข้อมูล: MQTT มีข้อจำกัดในเรื่องขนาดของ payload ที่สามารถส่งได้ในแต่ละครั้ง หากข้อมูลอุณหภูมิมีขนาดใหญ่อาจต้องแบ่งส่งเป็นหลายส่วน

##### เมื่อไรไม่ควรใช้ MQTT ในโครงการวัดอุณหภูมิ?

    ต้องการความแม่นยำสูงมาก: หากต้องการความแม่นยำในการวัดอุณหภูมิสูงมากและรับประกันว่าข้อมูลจะไม่สูญหาย MQTT อาจไม่ใช่ตัวเลือกที่ดีที่สุด
    ข้อมูลมีปริมาณมากและมีความถี่สูง: หากมีเซ็นเซอร์จำนวนมากส่งข้อมูลมาอย่างต่อเนื่อง MQTT อาจไม่สามารถรับมือได้ดี
    ต้องการระบบที่มีความปลอดภัยสูงมาก: หากข้อมูลอุณหภูมิมีความสำคัญสูงและมีความเสี่ยงที่จะถูกโจมตี MQTT อาจไม่เพียงพอ



![ภาพ](https://github.com/user-attachments/assets/b03aa71e-0660-44de-9471-b42a1e8ba01f)

![ภาพ](https://github.com/user-attachments/assets/35e625f5-8463-467a-8ea6-90ded5dce81e)






















